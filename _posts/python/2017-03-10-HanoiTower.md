---
layout: post
title: "递归算法--HanoiTower"
categories: Python
---


* content
{:toc}


## 起源

汉诺塔（又称河内塔）问题是源于印度一个古老传说的益智玩具。

大梵天创造世界的时候做了三根金刚石柱子，在一根柱子上从下往上按照大小顺序摞着64片黄金圆盘。

大梵天命令婆罗门把圆盘从下面开始按大小顺序重新摆放在另一根柱子上。

并且规定，在小圆盘上不能放大圆盘，在三根柱子之间一次只能移动一个圆盘。


## 抽象成数学问题


如下图所示，从左到右有A、B、C三根柱子，其中A柱子上面有从小叠到大的n个圆盘，现要求将A柱子上的圆盘移到C柱子上去.

期间只有一个原则：一次只能移到一个盘子且大盘子不能在小盘子上面，求移动的步骤和移动的次数.

![1]({{ site.url }}/pic/python/HanoiTower/1026866-20161016022859889-2055402664.jpg)


## 归纳法求解

n = 1

第1次  1号盘  A ---->C 


n = 2

第1次  1号盘  A---->B

第2次  2号盘  A---->C

第3次  1号盘  B---->C


n = 3

第1次  1号盘  A---->C

第2次  2号盘  A---->B

第3次  1号盘  C---->B

第4次  3号盘  A---->C

第5次  1号盘  B---->A

第6次  2号盘  B---->C

第7次  1号盘  A---->C 


## 归纳总结

1个圆盘的次数 2的1次方减1

2个圆盘的次数 2的2次方减1

3个圆盘的次数 2的3次方减1

n个圆盘的次数 2的n次方减1


## 递归算法分析

我们在利用计算机求汉诺塔问题时，必不可少的一步是对整个实现求解进行算法分析。到目前为止，求解汉诺塔问题最简单的算法还是同过递归来求，至于是什么是递归，递归实现的机制是什么，我们说的简单点就是自己是一个方法或者说是函数，但是在自己这个函数里有调用自己这个函数的语句，而这个调用怎么才能调用结束呢？这里还必须有一个结束点，或者具体的说是在调用到某一次后函数能返回一个确定的值，接着倒数第二个就能返回一个确定的值，一直到第一次调用的这个函数能返回一个确定的值。


实现这个算法可以简单分为三个步骤：

* 把n-1个盘子由 A 移到 B；

* 把第n个盘子由 A 移到 C；

* 把n-1个盘子由 B 移到 C；

从这里入手，在加上上面数学问题解法的分析，我们不难发现，移到的步数必定为奇数步：

* 中间的一步是把最大的一个盘子由A移到C上去；

* 中间一步之上可以看成把A上n-1个盘子通过借助辅助塔（C塔）移到了B上，

* 中间一步之下可以看成把B上n-1个盘子通过借助辅助塔（A塔）移到了C上；



## 调用方法的栈机制

特点：先进后出

从主线程开始调用方法（函数）进行不停的压栈和出栈操作，函数的调用就是将函数压如栈中，函数的结束就是函数出栈的过程，这样就保证了方法调用的顺序流，即当函数出现多层嵌套时，需要从外到内一层层把函数压入栈中，最后栈顶的函数先执行结束（最内层的函数先执行结束）后出栈，再倒数第二层的函数执行结束出栈，到最后，第一个进栈的函数调用结束后从栈中弹出回到主线程，并且结束。


## Pythond代码

{% highlight shell %}
def HanoiTower(n,source,Buffer,destination):
    if n == 1:
        print(source,'------>',destination)
        return
    HanoiTower(n-1,source,destination,Buffer)
    HanoiTower(1,source,Buffer,destination)
    HanoiTower(n-1,Buffer,source,destination)
HanoiTower(4,'A','B','C')
{% endhighlight %}

{% highlight shell %}
A ------> B
A ------> C
B ------> C
A ------> B
C ------> A
C ------> B
A ------> B
A ------> C
B ------> C
B ------> A
C ------> A
B ------> C
A ------> B
A ------> C
B ------> C
{% endhighlight %}


-----------------------------

end




